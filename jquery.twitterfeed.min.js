(function(d){"function"===typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],d):d(jQuery)})(function(d){function h(c){return c}function k(c){return decodeURIComponent(c.replace(p," "))}function f(c){0===c.indexOf('"')&&(c=c.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return g.json?JSON.parse(c):c}catch(e){}}var p=/\+/g,g=d.cookie=function(c,e,b){if(void 0!==e){b=d.extend({},g.defaults,b);if("number"===typeof b.expires){var a=b.expires,l=b.expires=new Date;l.setHours(l.getHours()+ a)}e=g.json?JSON.stringify(e):String(e);return document.cookie=[encodeURIComponent(c),"=",g.raw?e:encodeURIComponent(e),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join("")}e=g.raw?h:k;b=document.cookie.split("; ");for(var a=c?void 0:{},l=0,q=b.length;l<q;l++){var m=b[l].split("="),n=e(m.shift()),m=e(m.join("="));if(c&&c===n){a=f(m);break}c||(a[n]=f(m))}return a};g.defaults={};d.removeCookie=function(c,e){return void 0!== d.cookie(c)?(d.cookie(c,"",d.extend(e,{expires:-1})),!0):!1}}); (function(d){d.fn.twitterFeed=function(h){var k=this;h=d.extend({url:"twitterfeed.php",cache:!1},h);var f=new function(){var f=h.url,g=function(c){var b=c.split(" ");c=b[1]+" "+b[2]+", "+b[5]+" "+b[3];var a=Date.parse(c),b=1<arguments.length?arguments[1]:new Date,a=parseInt((b.getTime()-a)/1E3),a=a+60*b.getTimezoneOffset();return 60>a?"less than a minute ago":120>a?"about a minute ago":3600>a?parseInt(a/60).toString()+" minutes ago":7200>a?"about an hour ago":86400>a?"about "+parseInt(a/3600).toString()+ " hours ago":172800>a?"1 day ago":parseInt(a/86400).toString()+" days ago"},c=function(c){return c.replace(/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi,'<a href="$1">$1</a>').replace(/(^|\s)#(\w+)/g,'$1<a href="http://search.twitter.com/search?q=%23$2">#$2</a>').replace(/(^|\s)@(\w+)/g,'$1<a href="http://twitter.com/$2">@$2</a>')};this.fetch=function(){if(h.cache){var e=d.cookie("tweet");void 0!==e?k.html(e):d.getJSON(f,function(b){var a='<div id="tweets-wrapper">'; d.each(b,function(b,d){var e=c(d.text),f=g(d.created_at);a+='<div class="tweet">';a+=e;a+="<small>"+f+"</small>";a+="</div>"});a+="</div>";d.cookie("tweet",a,{expires:1});k.html(d.cookie("tweet"))})}else d.getJSON(f,function(b){var a='<div id="tweets-wrapper">';d.each(b,function(b,d){var e=c(d.text),f=g(d.created_at);a+='<div class="tweet">';a+=e;a+="<small>"+f+"</small>";a+="</div>"});a+="</div>";k.html(a)})}};return k.each(function(){f.fetch()})}})(jQuery);